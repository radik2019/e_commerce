

{% extends "store_app/base.html" %}
{% block content %}
    <h2 style="text-align:center;"> My cart</h2>
    <br>  <hr>
    <form  method="post">
        {% csrf_token %}
        <table class="table table-striped table-hover text-info">

            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Pieces</th>
                    <th scope="col">Name</th>
                    <th scope="col">Total</th>
                    <th scope="col">Discounted Total</th>
                    <th scope="col">Select</th>
                    <th scope="col">Input remove</th>
                </tr>
            </thead>

            <tbody>
                {% for product in cart %}
                    <tr  class="table table-striped table-hover     text-white">
                        
                        <th scope="row">1</th>
                        <td scope="row">{{ product.avaiability }}</td>
                        <th scope="row">{{ product.product.name }}</th>
                        <td> {{ product.get_sum_of_product_cost }}</td>
                        <td> {{ product.get_discounted_sum }}</td>
                        <td><input type="checkbox" name="rm{{ product.pk }}" > </td>
                        <th scope="row"> <input type="number"  placeholder="pezzi da rimuovere" name="pcs{{ product.pk }}", min="0", max="{{ product.avaiability }}"></th>  
                    </tr>
                {% endfor %}
            </tbody>
        </table>


        <br><br>
        <div  class="position-absolute start-50 translate-middle">
            <button formaction="{% url 'removefromcart' %}" type="submit" class="btn btn-outline-info w-100 p-2 mb-1" >Remove from cart</button>

            <button formaction="{% url 'index' %}" type="submit" class="btn btn-outline-warning w-100 p-2 mb-1" >Buy</button>
        </div>
    </form>
    <hr>
    Total: {{ cart_summ }}
    <hr>
    Discounted total: {{ cart_dicounted_summ }}
{% endblock %}

